{
  "meta": {
    "name": "Driving License Application",
    "description": "Apply for a driving license",
    "version": "1.0.0"
  },
  "config": {
    "templates": {
      "base": "template.njk",
      "defaults": {
        "summary": "driving-license/custom-summary",
        "confirmation": "_defaults/confirmation"
      }
    },
    "store": {
      "type": "session"
    },
    "auth": {
      "required": true
    }
  },
  "steps": {
    "start": {
      "title": "Do you already have a provisional licence?",
      "description": "We need to know if you already have a provisional licence to determine your next steps.",
      "fields": {
        "hasProvisional": {
          "type": "radios",
          "label": "Do you already have a provisional licence?",
          "hint": "A provisional licence allows you to learn to drive",
          "options": [
            { "value": "yes", "text": "Yes, I have a provisional licence" },
            { "value": "no", "text": "No, I need to apply for one" }
          ],
          "validate": {
            "required": true,
            "customMessage": "Select yes or no"
          }
        }
      },
      "next": {
        "when": "hasProvisional == 'yes'",
        "goto": "summary",
        "else": "personal-details"
      }
    },
    "personal-details": {
      "title": "Your personal details",
      "description": "We need some basic information about you",
      "fields": {
        "firstName": {
          "type": "text",
          "label": "First name",
          "validate": {
            "required": true,
            "minLength": 2,
            "maxLength": 50,
            "customMessage": "Enter your first name"
          }
        },
        "lastName": {
          "type": "text",
          "label": "Last name",
          "validate": {
            "required": true,
            "minLength": 2,
            "maxLength": 50,
            "customMessage": "Enter your last name"
          }
        },
        "email": {
          "type": "email",
          "label": "Email address",
          "hint": "We'll use this to send you updates about your application",
          "validate": {
            "required": true,
            "email": true,
            "customMessage": "Enter a valid email address"
          }
        },
        "postcode": {
          "type": "text",
          "label": "Postcode",
          "classes": "govuk-input--width-10",
          "validate": {
            "required": true,
            "pattern": "^[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}$",
            "customMessage": "Enter a valid UK postcode"
          }
        }
      },
      "next": "summary"
    },
    "summary": {
      "title": "Check your answers",
      "type": "summary",
      "description": "Review your information before submitting your application",
      "next": "confirmation"
    },
    "confirmation": {
      "title": "Application complete",
      "type": "confirmation",
      "data": {
        "referenceNumber": "DL-{{timestamp}}"
      }
    }
  }
}
