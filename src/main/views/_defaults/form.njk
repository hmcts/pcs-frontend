{% extends "journeyTemplate.njk" %}

{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    {% if errorSummary %}
      {{ govukErrorSummary(errorSummary) }}
    {% endif %}
    {% if step.title %}
      <h1 class="govuk-heading-l">{{ step.title }}</h1>
    {% endif %}

    {% if step.description %}
      <span class="govuk-caption-l">{{ step.description }}</span>
    {% endif %}

    <form method="post" novalidate>
      {% for fieldName, fieldConfig in step.fields %}
        {% if fieldConfig.type in ['text', 'email', 'tel', 'password', 'url', 'number'] %}
          {{ govukInput(fieldConfig) }}

        {% elif fieldConfig.type == 'textarea' %}
          {{ govukTextarea(fieldConfig) }}

        {% elif fieldConfig.type == 'radios' %}
          {{ govukRadios(fieldConfig) }}

        {% elif fieldConfig.type == 'checkboxes' %}
          {{ govukCheckboxes(fieldConfig) }}

        {% elif fieldConfig.type == 'select' %}
          {{ govukSelect(fieldConfig) }}

        {% elif fieldConfig.type == 'date' %}
          {{ govukDateInput(fieldConfig) }}

        {% elif fieldConfig.type == 'address' %}
          {% include "components/addressLookup.njk" %}

        {% elif fieldConfig.type == 'button' %}
          <div class="govuk-button-group">
            {% set btnAttrs = fieldConfig.attributes or { type: 'submit' } %}
            {{ govukButton({
              text: fieldConfig.text or 'saveAndContinue',
              html: fieldConfig.html,
              href: fieldConfig.href,
              classes: fieldConfig.classes,
              attributes: btnAttrs,
              isStartButton: fieldConfig.isStartButton,
              preventDoubleClick: fieldConfig.preventDoubleClick
            }) }}
          </div>
        {% endif %}

      {% endfor %}

    </form>
  </div>
</div>

{% endblock %}
